<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bin Collections - Royston</title>
<link rel="icon" type="image/png" href="logo2.png">
<style>
    body {
        background: #000;
        color: white;
        font-family: Arial, sans-serif;
        padding: 20px;
    }
    h1 { text-align: center; margin-bottom: 30px; }
    .bin {
        background: #111;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 10px;
        border: 1px solid #333;
    }
    .today { color: #17d860; font-weight: bold; }
    .tomorrow { color: #4db6ff; font-weight: bold; }
</style>
</head>
<body>

<h1>Bin Collections - Royston</h1>
<div id="output"></div>

<script>
    // --- Utility Functions ---
    function formatDate(d) {
        return d.toLocaleDateString("en-GB", {
            weekday: "long",
            day: "2-digit",
            month: "long",
            year: "numeric"
        });
    }

    function addDays(date, days) {
        const d = new Date(date);
        d.setDate(d.getDate() + days);
        return d;
    }

    function nextCycle(start, cycleDays, today) {
        let d = new Date(start);
        while (d < today) d = addDays(d, cycleDays);
        return d;
    }

    // --- Today (auto) ---
    const today = new Date(); // auto-updates every day
    const tomorrow = addDays(today, 1);

    // --- Official Starting Points from Council ---
    const cycles = {
        nonRecyclable: {
            name: "Non-Recyclable Waste (Purple Lid)",
            start: new Date("2025-11-17"),
            cycle: 21
        },
        food: {
            name: "Food Waste (Brown Caddy)",
            start: new Date("2025-11-17"),
            cycle: 7
        },
        mixed: {
            name: "Mixed Recycling (Black Lid)",
            start: new Date("2025-11-24"),
            cycle: 21
        },
        garden: {
            name: "Garden Waste (Brown Lid)",
            start: new Date("2025-11-24"),
            cycle: 14
        },
        paper: {
            name: "Cardboard & Paper (Blue Lid)",
            start: new Date("2025-12-01"),
            cycle: 21
        }
    };

    // --- Render Output ---
    const output = document.getElementById("output");

    for (const key in cycles) {
        const bin = cycles[key];
        const next = nextCycle(bin.start, bin.cycle, today);

        let label = "";
        if (formatDate(next) === formatDate(today)) label = " <span class='today'>(Today)</span>";
        if (formatDate(next) === formatDate(tomorrow)) label = " <span class='tomorrow'>(Tomorrow)</span>";

        output.innerHTML += `
            <div class="bin">
                <h2>${bin.name}</h2>
                <p><strong>Next collection:</strong> ${formatDate(next)}${label}</p>
                <p><strong>Collection cycle:</strong> Every ${bin.cycle === 7 ? "Monday" : (bin.cycle === 14 ? "Monday fortnightly" : "3rd Monday")}</p>
            </div>
        `;
    }
</script>

</body>
</html>
